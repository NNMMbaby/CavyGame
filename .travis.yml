language: objective-c
osx_image: xcode6.4
script:
- xctool -workspace $APP_NAME.xcworkspace -scheme $APP_NAME -sdk iphoneos  -configuration
  Release OBJROOT=$PWD/build   SYMROOT=$PWD/build CODE_SIGN_IDENTITY="$DEVELOPER_NAME"
  ONLY_ACTIVE_ARCH=NO
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/$PROFILE_NAME.mobileprovision.enc
  -d -a -out scripts/profile/$PROFILE_NAME.mobileprovision
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a
  -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a
  -out scripts/certs/dist.p12
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/aps.cer.enc -d -a
  -out scripts/certs/pas.cer
- ./scripts/add-key.sh
after_success:
- ./scripts/sign-and-upload.sh
after_script:
- ./scripts/remove-key.sh
env:
  global:
  - APP_NAME="CavyGame"
  - 'DEVELOPER_NAME="iPhone Distribution: Hangzhou Cavy Technology Co., Ltd."'
  - PROFILE_NAME="cavyGameDisPro"
  - secure: JWDcH2i2mIidZm1HAAC86+cbnSJxN1GATTsxoU12s14BmDqcP1JKFYzwL7trYInYGJN+UyGxWk+FPIPy3CdSkE4d1Vdrf6rdxsfgZ+WXZ36yv201zjK+s84csOHUGN8Ii5cVy1zoCs5RTofzECfVK6AXLN2VkJiy3x0Duu6xtFflXCtJBpjTjBcF5dqHJcsCxdZ2Ah/HcQwwXBVOYo9fBrUgtLPm2012/oiezf/0qkTSQDZH4MF0+PlcTBx/yS4s23nZL/VJRlX0qAVChVwurpBH+m+xXdmE8L7MrtnInhi6/+viPhHNMIa6Jp9ttDXfuQWJeJ8sVtgeu5xrm++GR7FPmDt3RQS2dD3pJFIYP3LyIQdn5FvdDKjOKsUCH/KFpD+lGuWs/4F8NR4UDUsL17imX/fBv3S5qJ4R3W92YUMzBEvxbi7E9MnEuVX2VZOQ1j6TEj+dtr1kgSoy6GWNf8QQeRF34O20tP/74NhMMPcDOI1qioRxiLRcUzVnSJxvp1LSfKGVs5/IEQGiTkYWHgFnVak3dYanYo8SiO8J4HInM49K3juuXah8vRFkzNaL7jLvUt3BN+T+4KLXYPOPdNqt2G5GpPak483AbKCOVEOVlJk7m3VZbddA95AnXfc51TJGnUi21o8YmDqDinFewkMWgrweXG297jc6smIQAss=
  - secure: ZFGgOCW/5dFsI9RjcPT0ZJjcJMZHoJdH/JPVav+09nVwQbu1sjA1EWux6TYbHJSfC9eVdXW/7/7YGAXb7a90bTi8t38TA4Hd6FlOhJaPLunOr2JE/sosl9/iGzOkK54DthYsJCcaxjWSkS5S7M3tYqquCxxz6oDdpNBMxqSEZxoCSFvJq9Z6aMt3pDlqASP1aWZDbwe5dJMJlIFqQbtZUwxzgCM5evlN7K0aOicQf3hc2phs9ikwUL6ccFQPZpAFvqk2yop1pU8Y8lFd49W1xYGTytK/BD1yjuuZf/OrRPCLODDH8ieXoKccCxmMnNhw21E2Xkao02DDW0ASZqL3cb9QiuBLuSYRuVFc8JYgoOcYticsUUPxElDWLdOf1BNG5PA/LybI2t6TPa7773TZddadusJ2D9tHNBU7eI9i9MguPBESxgrkkBzb6oH1Ce3LbOrEMGSF1AyyEzCRmP93I9xhMvnR0OcPJz5HFXlua8Zj0nPtBDqwSmvGysFMmG5e84QJef+aDQR3ROqjZSpzHvknoVd9Lwdv57BckZI1wxSZ3L9hFl4IARKES+wxCR0+IpP+NL+BR7htyieG25f1kVk3xVVIXQ+UJqY83+FgtPbyVjjDAGvdACGHTfx9KZiG+5uwW4nlMVq9cUF8m9GuOmPnb5Paobm4gPFmFgrzhMQ=
  - secure: OWiDuzMRdNrdcW+z2+hXLBweQxiO0tMu21z4WJyhj/969g0k3Wz81ztFanVzI5vtBE4DK/VZQNFbmd897CItoNezCenAlVAeFmvjL0994eU9gNuoLkusbHQILGIcA/2cOSoXOkc9gPD9+iAU/2x5FWMzMZryvKn3yoSSHrth0jMCXnXOosGoTfUaMihMyWXAy2H4/7nDPjQmLcc/g2sjZyLPZOGue8mO6X9KnqMeFyq9XDzK2biOJxKO4Dx59IRNK87TlXAGC80mvFBLA2/NyIatek4HKx9V0je2wkzsSzzDHkYIM5bEmVpQJaG7oiPOzssxtxV7HMXRjKzYDApaE4jX154QnSLrkI4LsHecRd1uNV0W65dZWZjwp6TpXm8OIlQFTqBxcduwyp7Pu+FkE+xKdft7eW9tzT0UsYnm1hdEfQWTA2gTtkvuKtxgECi1M3pb5EEpjP21jw8qxoRV4EyB/cT2j0BHJ/vkfihmBbUwP4VI3fGb6YDlLl1prgpPyP0qG24tzl9jC8e/+gvl7C91zIXqVwslyh1LdQj8OBlQmaVMMkckx5Cl7+CNYChzZjljdQEGHlsL9PZDI0RJ2UE9NTyzRoKD5PT8aOdYJevkrAEzLQOnafe4aQWuT4v2T8ejvoD/coMkpzXftaLiRKkKLSJSnzDmADpSeO3Etzs=
  - secure: K2mD1UtIuKyRq0ONkaPnRF/9Oh0CgQMro8jwtocyxq+ATiDMMdk+RDyjTldWqwnjW8ul3bfehVseVflFBzMPI5ZP0SaVlr4yaCoJSTKAQGEAeZuBcck60O3+4a1VZ9fRtVoAKZMGvC59uEGf3mwdwETClJd03VqYJHVlb+FNzXd+6Z3LlVKbxjSAY2MwXAMVmNou07QDkgeVokKWbQvEmIP4XyGBdWupuiYCRP8Frpk+pI6x/EtoVMEDXg3iZyNs/irKGkTZd6RG7A5D4VmmALMtCebaR/EGSu2mnw/Ethh1ic4QwRawzDEE+95or2XcIIPIXCvQ6+vJ0dzQIgB3WNEFQmcm+Fgb9yN4qMKbArnuFifEIfzdpLqecJHuokq05qNod2egu+4JhzyFD2vjxDZ0AAyGIU2wgRzlgG7HCt97uDRaf2ObHjuWw99agsiVmZuzstd8BZNY7f56TxV2tqivIFAEpwEAohC/0tfjQYdrsZZKmTJqijQiLuQK5fqtAyKiwh0U4e7NvMX+ECoy8MCIjUzgBDWTogeqzYMDG7Xl0ZV6pUt3/pzvQVbnEhMLEttapQrkWfQqet11Y51B0+HxlO5hAFKvNfhVT0QqGl72E1Ri0go2NowMTcIYDAFK/laqxj0c7rAzO3rI+Y9AwxPJ3fq7pDGvCUSJAE+ZF2U=
