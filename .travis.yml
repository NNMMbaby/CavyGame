language: objective-c
osx_image: xcode6.4
script:
- xctool -workspace $APP_NAME.xcworkspace -scheme $APP_NAME -sdk iphoneos  -configuration
  Release OBJROOT=$PWD/build   SYMROOT=$PWD/build CODE_SIGN_IDENTITY="$DEVELOPER_NAME"
  ONLY_ACTIVE_ARCH=NO
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/$PROFILE_NAME.mobileprovision.enc
  -d -a -out scripts/profile/$PROFILE_NAME.mobileprovision
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a
  -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a
  -out scripts/certs/dist.p12
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/aps.cer.enc -d -a
  -out scripts/certs/pas.cer
- ./scripts/add-key.sh
after_success:
- ./scripts/sign-and-upload.sh
after_script:
- ./scripts/remove-key.sh
env:
  global:
  - APP_NAME="CavyGame"
  - 'DEVELOPER_NAME="iPhone Distribution: Hangzhou Cavy Technology Co., Ltd."'
  - PROFILE_NAME="cavyGameDisPro"
  - secure: ClkVpwqL4RLiOEJPl2uZbVs14C+XN74gaUy8qb6emUKYeFZrsUgl15fMLe8MslVJ5oMtF1q2AY5k6eYIcaSQz5R74dPsusNjPsIKvliOHmaOc5We80sNlY4sfGNECAUrNEb2gCJfEA6rXxKe3lFSCCkMIELbfoXUUxpg7xKv763IupbQWDBEIR3XEKbltLvirTQC4R3wGJry/lwoYXsORwDdMrJ2CQRMIUHk1j5yX/SczwkvWlPB2m+CIZBxIJnSSAEvPqH17Yb+0elF8vzj1wfE0LUuo3bK56gv7WbiUjDsdwEx5Hvq9acs1YE8lXj+8B7NJll/Ozd3DT3aFTpFp9GA94j3cOQR+Fj76VjiuCp5sYJDm9JFbcMlZJjOaunKng/Eb6rB2gnfJvic1CTnVJH58HFLcuAA8ggmKBfOEkYGGpvSZlGBNSYfsi/LnBeHlCeIGVzU/6g7m1NoEOh2dZ3sUNxGnSkffyPSPKfnrCLeKxrdENz1mMSoS8SX+8Uqd64hnG23LJrryprD2A5TtrI2jBh8R3rzF5LZchbx2OoQHbXbhUG3k641jgv4sHWWZvJn1kZEBU6jRU4IICt3sLxIp0hd3bWYlNBf5mOqcRUEm/xLim85XLC10BnPTzaJ9EcNbVDrLpgIwww7pFQSs2GTPgX6PS/UFs7T11DfKDw=
  - secure: mFYJwMzOD7dJTFATmm03W1qbInHxaHU5tXhDL61H9OwPYCrXKdYIYfCtPSiqUARXzPec4vDQSNE8lLC8oW92K+ZykY9SVxMEBvB0+WQTF2s/70Xbqu7n6Uvs7Qn4T2mA8QmdtOb05VcpTgXBhxBDsGHOsxsLG0bBmrkkAYgLd5Bqobii8jONGqtny1wEw1/V/IjD9cx0nciNkCH0UBT8utAeU5E4kxena+b1PbOqO6TS7Gq8GbcCktEBKWVgWQvhuKKMLlalgyJtWC9xOVx4tJgCDw2UjmoFycqVcu6MQyUMQ0sgfXBIDHbBiJWWGWtvgS+PggmoTmMzclo/hWWQv+gqas2GvhmRPhDAxsve3chiyJ4cqiQu4126ix5Db1cqiD8Ok/Ksq4blh93rTJXN97Htb7lhetNdZXXGP/AO5Ietauj9Bk2nyUP9uSi6AIqPESatHnpxGl/PMH+c2ggh+/d62xTFKzVJEPBiM/LLXurw27irKSJynVu3ttyopnj0Rx8MNbby2eHYhmggbxNlUMB0LpHn/MqDmNnalUCmGhq2Hts6nH4J15KOd7RmagBkRiH8hcddiSu8EGiDOZeQQBmw3g1hf9rrbjfPAYGQb4fGvRYWJm7D7jnjaJB8rnroTeAaRZ0/p01AEsLlF3CTOngMKNtIRHxHY5wvWtr/+ZQ=
  - secure: dzyUpnpAQmQbs8ACcshn+nQX1gxe5J071IbgN9T6A08Mb9E0To2DOAiu0b9/GGbrnCPcZ0cMlVlDevulqrwYL5HQ5jiYeP3zNAcE1ZKTVtP8XHDZv4nCSCbJhw9YZC7EZ5/FXnY6R5w53FX8AyojzDypoJ7ZD7uFY3+ilzhvuuThGK3ROFJgQ5ms4h7h+7IGt1bVhzMBu7dJQMcqK+GoCHwXWJ7zwfZQ2RqeWzdCX9ODPyqii2cIWB+MWTnS/4hWduB6njhHjqyG1Jt8hs3VZBTUPJCU+uWRxVg+nDntfVmiLUsu0uhsMVkZquCYfD2Y6A9ewCqOnRavg8cdJfSpD7VkljRPZdqNZQqwYl/guOZoNBvSOTGKyaO7Gk6InlJQYfrBqMGeNdGiUTnsXxz3cGtJ0kTcIXvSpcs3ydTpJJ3gzlyPI2EKVpwUMp408rLRX42WkZBhyU25yOeuiiO92I8XFt1u8cc1v1b10y/IXdm9th4UDzCf59Ncon0O7R7mtuBtKw914TkawzlhBz/9Sx04ELoggoaw0xr5isSyTJy/uiSj/KvAGUtLCaMGQJrMY4OXYgS/1jUyL0uAOrRJLCHSEG8AS/6d6DDWkDAGVHgJ7fetNcoE53qK1PO8BICQu2zeRoI7ml7quCtQDyE7AnqlwU/ud0MCoCv4vfOQNwk=
  - secure: QJEvdKTMnBYdL3KRC/fnc8T2VRaTzYLyKMYMOOcAJR57EIG6rBQj4a3Ucaq5k5wgHBaR9mS/Lr28h3+AlP0rWtDwNVao7ggC7urxGIGkm13J+9KE/v2e02wtAHXGIUzpafXYHFzffXW6gEdI1g8tkcaoJk2nuWRxH5oUs0EvhCCiUlPZSP/P5mlFsYWZG4sA21Srt0Ui17Ey5+qF0YrLD4rWKGhJTWRSTfjHg8IGKWF/4uYRfeUyHqoM4JHUorF2e/CVc5yY7XvYvD2A6SgyT6RfOl6PuzS7OuyKc4U+6i9rvMzHhnxVub+FkFoNOLL4F9awJy+oLQcilHiU+zjp5403FSwz/ghcdo36o0jC195qI4q5L/+J1eGYPQbJ62Zn34mqBLTk0fNuDBA0QrNZA9wqvioGPc2SRWBhKeUpJDbq64Be2vzkuyY2JW1JYe+U/vTDdwdh2IhdXzCQojksFapCuE8UHwgnke8WNUND1IaqoBN/7JccXuEBctru8pYFunciWTTC16uFV0n+SxQfPE8aJAW9XwRGhmMaS29+3vrQ/qcAyMOms8v0W7gEqOPz0TWCgqir9U0PBvf989zRLOXv0B8GsDhDJCkYhLoXasDjrN/wv/l4vQLmpw916IjMe6hSBHGL23YtgK38yHD/mWICbIk5LWFt9pbfHu6J77g=
